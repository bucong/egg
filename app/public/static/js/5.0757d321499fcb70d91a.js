webpackJsonp([5],{"3Mvt":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=a("BO1k"),i=a.n(o),s=a("sf/l"),r=a("f+26"),n=a("Au9i"),l={name:"admin-home",data:function(){return{state:"",store:"",list:[],detail:{},showDetailBox:!1,allLoaded:!1,page:1}},created:function(){Object(s.a)("订单管理"),this.getOrder()},methods:{getOrder:function(){var t=this;this.page=1,Object(r.a)("get","order/list",{state:this.state,store:this.store,page:this.page},function(e){var a=!0,o=!1,r=void 0;try{for(var n,l=i()(e);!(a=(n=l.next()).done);a=!0){var c=n.value;c.times=Object(s.e)(c.times)}}catch(t){o=!0,r=t}finally{try{!a&&l.return&&l.return()}finally{if(o)throw r}}t.list=e,e.length<=20?t.allLoaded=!0:t.allLoaded=!1})},loadTop:function(){var t=this;this.getOrder(),setTimeout(function(){t.$refs.loadmore.onTopLoaded()},500)},loadBottom:function(){var t=this;this.page++,Object(r.a)("get","order/list",{state:this.state,store:this.store,page:this.page},function(e){var a=!0,o=!1,r=void 0;try{for(var n,l=i()(e);!(a=(n=l.next()).done);a=!0){var c=n.value;c.times=Object(s.e)(c.times)}}catch(t){o=!0,r=t}finally{try{!a&&l.return&&l.return()}finally{if(o)throw r}}t.list.concat(e),e.length<=20?t.allLoaded=!0:t.allLoaded=!1,t.$refs.loadmore.onBottomLoaded()})},showDetail:function(t){var e=this;Object(r.a)("get","order/orderItem",{id:t},function(t){e.detail=t,e.showDetailBox=!0})},acceptOrder:function(t){var e=this;n.Indicator.open("加载中..."),Object(r.a)("get","order/accept",{id:t},function(a){var o=!0,s=!1,r=void 0;try{for(var n,l=i()(e.list);!(o=(n=l.next()).done);o=!0){var c=n.value;c.id===t&&(c.state=2)}}catch(t){s=!0,r=t}finally{try{!o&&l.return&&l.return()}finally{if(s)throw r}}})},finishOrder:function(t){var e=this;Object(r.a)("get","order/finish",{id:t},function(a){var o=!0,s=!1,r=void 0;try{for(var n,l=i()(e.list);!(o=(n=l.next()).done);o=!0){var c=n.value;c.id===t&&(c.state=4)}}catch(t){s=!0,r=t}finally{try{!o&&l.return&&l.return()}finally{if(s)throw r}}})},cancelOrder:function(t){var e=this;n.MessageBox.confirm("确定执行此操作?").then(function(a){a&&Object(r.a)("get","order/cancel",{id:t},function(a){var o=!0,s=!1,r=void 0;try{for(var n,l=i()(e.list);!(o=(n=l.next()).done);o=!0){var c=n.value;c.id===t&&(c.state=3)}}catch(t){s=!0,r=t}finally{try{!o&&l.return&&l.return()}finally{if(s)throw r}}})})}},components:{"mt-loadmore":n.Loadmore}},c={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"admin-home"},[a("div",{staticClass:"flex search"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.state,expression:"state"}],attrs:{name:""},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.state=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:""}},[t._v("订单状态")]),t._v(" "),a("option",{attrs:{value:"1"}},[t._v("未接单")]),t._v(" "),a("option",{attrs:{value:"2"}},[t._v("已接单")]),t._v(" "),a("option",{attrs:{value:"3"}},[t._v("已取消")]),t._v(" "),a("option",{attrs:{value:"4"}},[t._v("待评价")]),t._v(" "),a("option",{attrs:{value:"5"}},[t._v("已完成")])]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.store,expression:"store"}],attrs:{name:""},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.store=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:""}},[t._v("门店")]),t._v(" "),a("option",{attrs:{value:"人民广场店"}},[t._v("人民广场店")]),t._v(" "),a("option",{attrs:{value:"上海大学店"}},[t._v("上海大学店")]),t._v(" "),a("option",{attrs:{value:"徐汇店"}},[t._v("徐汇店")]),t._v(" "),a("option",{attrs:{value:"虹桥店"}},[t._v("虹桥店")]),t._v(" "),a("option",{attrs:{value:"张江高科店"}},[t._v("张江高科店")])]),t._v(" "),a("button",{on:{click:t.getOrder}},[t._v("搜索")])]),t._v(" "),t.list.length>0?a("div",[a("mt-loadmore",{ref:"loadmore",attrs:{"top-method":t.loadTop,"bottom-method":t.loadBottom,"bottom-all-loaded":t.allLoaded,autoFill:!1}},[a("ul",{staticClass:"list"},t._l(t.list,function(e){return a("li",[a("div",{staticClass:"flex show-detail",on:{click:function(a){t.showDetail(e.id)}}},[a("span",{staticClass:"id"},[t._v(t._s(e.id))]),t._v(" "),a("h6",[t._v(t._s(e.times))]),t._v(" "),a("span",{staticClass:"price"},[t._v("￥"+t._s(e.price))]),t._v(" "),a("span",{staticClass:"store"},[t._v(t._s(e.store))])]),t._v(" "),1===e.state?a("div",{staticClass:"operate"},[a("span",[t._v("未接单")]),t._v(" "),a("button",{on:{click:function(a){t.acceptOrder(e.id)}}},[t._v("接单")]),t._v(" "),a("button",{staticClass:"cancel",on:{click:function(a){t.cancelOrder(e.id)}}},[t._v("取消")])]):2===e.state?a("div",{staticClass:"operate"},[a("span",{staticStyle:{color:"#18ac16"}},[t._v("已接单")]),t._v(" "),a("button",{on:{click:function(a){t.finishOrder(e.id)}}},[t._v("完成")])]):3===e.state?a("div",{staticClass:"operate"},[a("span",{staticStyle:{color:"#999"}},[t._v("已取消")])]):4===e.state?a("div",{staticClass:"operate"},[a("span",{staticStyle:{color:"#666"}},[t._v("待评价")])]):5===e.state?a("div",{staticClass:"operate"},[a("span",{staticStyle:{color:"#999"}},[t._v("已完成")])]):t._e()])}))]),t._v(" "),t.allLoaded?t._e():a("div",{staticClass:"load-more-info"},[t._v("上拉加载更多")])],1):a("div",[t._m(0)]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.showDetailBox,expression:"showDetailBox"}],staticClass:"meng",on:{click:function(e){t.showDetailBox=!1}}},[a("div",{staticClass:"show-detail-box",on:{click:function(t){t.stopPropagation()}}},[a("p",[t._v("单号："+t._s(t.detail.id))]),t._v(" "),a("ul",t._l(t.detail.list,function(e){return a("li",{staticClass:"flex"},[a("div",{staticClass:"imgbg",style:{backgroundImage:"url("+e.img+")"}}),t._v(" "),a("h5",[t._v(t._s(e.name))]),t._v(" "),a("span",[t._v("×"+t._s(e.num))])])}))])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"no-data"},[e("img",{attrs:{src:a("M/73"),alt:""}}),this._v(" "),e("p",[this._v("空空如也~")])])}]};var v=a("VU/8")(l,c,!1,function(t){a("UY1R")},"data-v-f9fbddfc",null);e.default=v.exports},UY1R:function(t,e){}});