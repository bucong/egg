webpackJsonp([10],{G2LO:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var a=e("sf/l"),i=e("f+26"),n=e("5CpS"),o=e("Au9i"),c={name:"evaluate-page",data:function(){return{userInfo:{},id:"",orderId:"",info:{},content:"",star:5,imgs:[],IMG:n.a}},created:function(){var t=this;this.userInfo=JSON.parse(Object(a.c)("get","userInfo")),this.id=Object(a.b)("id"),this.orderId=Object(a.b)("orderId"),Object(i.a)("get","commodity/info",{id:this.id},function(s){s?(t.info=s,Object(a.a)(t.info.name)):Object(o.Toast)("该菜品不存在")})},methods:{chooseStar:function(t){this.star=t},uploadFile:function(t){var s=this;if(this.imgs.length<3){this.file=t.target.files[0];var e=new FormData;e.append("imgFile",this.file),Object(i.a)("post","upload/img",e,function(t){s.imgs.push(t)})}else Object(o.Toast)("最多上传三张图片哦!")},sub:function(){var t=this;""===this.content?Object(o.Toast)("请填写评价内容"):Object(i.a)("post","commodity/evaluateSub",{cId:this.id,orderId:this.orderId,userId:this.userInfo.id,content:this.content,star:this.star,imgs:this.imgs.join(","),times:(new Date).getTime()},function(s){Object(o.Toast)({message:"评价成功",duration:1e3}),setTimeout(function(){t.$router.go(-1)},1e3)})}}},r={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"evaluate-page"},[e("h2",[t._v("菜品评价")]),t._v(" "),e("div",{staticClass:"info flex"},[e("div",{staticClass:"imgbg",style:{backgroundImage:"url("+t.info.img+")"}}),t._v(" "),e("div",{staticClass:"content"},[e("h5",[t._v(t._s(t.info.name))]),t._v(" "),e("div",{staticClass:"star flex",class:"star"+t.star},[e("span",{staticClass:"choose-star",on:{click:function(s){t.chooseStar(1)}}}),t._v(" "),e("span",{staticClass:"choose-star",on:{click:function(s){t.chooseStar(2)}}}),t._v(" "),e("span",{staticClass:"choose-star",on:{click:function(s){t.chooseStar(3)}}}),t._v(" "),e("span",{staticClass:"choose-star",on:{click:function(s){t.chooseStar(4)}}}),t._v(" "),e("span",{staticClass:"choose-star",on:{click:function(s){t.chooseStar(5)}}})])])]),t._v(" "),e("div",{staticClass:"evaluate-content"},[e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.content,expression:"content"}],attrs:{name:"",cols:"30",rows:"10"},domProps:{value:t.content},on:{input:function(s){s.target.composing||(t.content=s.target.value)}}})]),t._v(" "),e("input",{attrs:{type:"file",id:"upload",multiple:"multiple"},on:{change:function(s){t.uploadFile(s)}}}),t._v(" "),e("ul",{staticClass:"imgs"},[t._m(0),t._v(" "),t._l(t.imgs,function(s){return e("li",{staticClass:"imgbg",style:{backgroundImage:"url("+t.IMG+s+")"}})})],2),t._v(" "),e("div",{staticClass:"sub"},[e("button",{on:{click:t.sub}},[t._v("提交")])])])},staticRenderFns:[function(){var t=this.$createElement,s=this._self._c||t;return s("li",{staticClass:"add"},[s("label",{attrs:{for:"upload"}},[this._v("+")])])}]};var l=e("VU/8")(c,r,!1,function(t){e("pVIn")},"data-v-42df452e",null);s.default=l.exports},pVIn:function(t,s){}});